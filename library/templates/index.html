{% extends "layout.html" %}

{% block headline %}
{% if flag != 'authors_list' and flag != 'authors_by_letter' %}
<a class="float-right" href="{{ url_for('main.search_books', flag='books_list') }}" style="text-decoration:none"> üîç
</a>
<a href="{{ url_for('main.home', flag='authors_list')}}" style="text-decoration:none; color:black">Books</a>
<a style="text-decoration:none" href="{{ url_for('book.add_title') }}"> +</a>
<a style="color: red; text-decoration:none" href="{{ url_for('main.search_books') }}">-</a>

{% else %}
<a class="float-right" href="{{ url_for('main.search_authors', flag='authors_list') }}" style="text-decoration:none"> üîç
</a>
<a href="{{ url_for('main.home')}}" style="text-decoration:none; color:rgb(0, 0, 0)">Authors</a>
<a style="text-decoration:none" href="{{ url_for('author.add_author') }}"> +</a>
<a style="color: red; text-decoration:none" href="{{ url_for('main.search_authors', flag='authors_list') }}">-</a>
{% endif %}

{% endblock %}

{%block subhead %}
<hr />
&nbsp;{{ total }} books - {{ total_auth }} authors in Total
{% if flag != 'authors_list' and flag != 'authors_by_letter' %}
<button type="button" class="btn btn-secondary float-right"
    style="color:white; --bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .6rem">
    <a style="color:white; text-decoration:none" href="{{ url_for('main.home', flag='authors_list') }}">
        Authors List </a>
</button>
{% else %}
<button type="button" class="btn btn-secondary float-right"
    style="color:white; --bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .6rem">
    <a style="color:white; text-decoration:none" href="{{ url_for('main.home') }}">
        Books List </a>
</button>
{% endif %}
{% endblock %}

{% block a_z %}
{% if flag == 'authors_by_letter' or flag == 'authors_list' %}
{% set url = 'author.authors_by_letter' %}
{% else %}
{% set url = 'book.books_by_letter' %}
{% endif %}
{% include 'a_z.html' %}
{% endblock %}

{%block content %}
{% if flag != 'authors_list' and flag != 'authors_by_letter' and flag != 'books_by_letter' %}
<ul>
    {% if books|count == 0 %}
    <p>Library is empty</p>
    {% else %}
    {% for book in books %}
    <li>
        <button class="btn btn-outline-secondary btn-sm">
            <a href="{{ url_for('book.edit_title', id=book.id) }}"
                style="text-decoration: none; color: darkgray">Edit</a>
        </button>
        <button class="btn btn-outline-danger btn-sm">
            <a href="{{ url_for('book.book_details', id=book.id, book=book) }}"
                style="text-decoration: none; color: orangered">Delete</a>
        </button>&ensp;‚ñ´Ô∏è
        <a style="text-decoration:none" href="{{ url_for('book.book_details', id=book.id) }}">{{ book.title }}</a>
        - {{book.first_publish}} -

        <a style="text-decoration:none"
            href="{{ url_for('author.bibliography', author=book.author) }}">{{ book.author }}</a>
        {% for author in book.authors %}
        {% if author.fullname != book.author %}
        <a style="text-decoration:none" href="{{ url_for('author.bibliography', author=author.fullname) }}">
            {{ '|' if loop.first else ''}} {{ author.fullname }} {{ '|' if not loop.last else ''}}</a>
        {% endif %}
        {% endfor %}

        <a style="font-weight:bolder; text-decoration:none"
            href="{{ url_for('author.bibliography', author=book.authors[0].fullname) }}">
            - {{book.authors[0].books|count}} books in collection</a>
    </li>
    {% endfor %}
    {% endif %}
</ul>
<br />
{% elif flag == 'authors_list' %}
<ul>
    {% if authors|count == 0 %}
    <p>Library is empty</p>

    {% else %}

    {% for author in authors %}
    <li>
        <button class="btn btn-outline-secondary btn-sm">
            <a href="{{ url_for('author.edit_author', id=author.id) }}"
                style="text-decoration: none; color: darkgray">Edit</a>
        </button>
        <button class="btn btn-outline-danger btn-sm">
            <a href="{{ url_for('author.author_details', id=author.id) }}"
                style="text-decoration: none; color: orangered">Delete</a>
        </button>&ensp;‚ñ´Ô∏è
        <a style="text-decoration:none"
            href="{{ url_for('author.author_details', id=author.id) }}">{{ author.fullname}}</a>
        - {{author.born}}-{{author.died}} - {{author.country}} - {{author.city}} -
        <a style="text-decoration:none"
            href="{{ url_for('author.bibliography', author=author.fullname) }}">{{author.books|count}} books
            in
            collection</a>
    </li>
    {% endfor %}
    {% endif %}
</ul>
<br />

{% elif flag == 'authors_by_letter' %}
<ul>
    {% if authors_by_letter|count == 0 %}
    <p>Library is empty</p>

    {% else %}

    {% for author in authors_by_letter %}
    <li>
        <button class="btn btn-outline-secondary btn-sm">
            <a href="{{ url_for('author.edit_author', id=author.id) }}"
                style="text-decoration: none; color: darkgray">Edit</a>
        </button>
        <button class="btn btn-outline-danger btn-sm">
            <a href="{{ url_for('author.author_details', id=author.id) }}"
                style="text-decoration: none; color: orangered">Delete</a>
        </button>&ensp;‚ñ´Ô∏è
        <a style="text-decoration:none"
            href="{{ url_for('author.bibliography', author=author.fullname) }}">{{ author.fullname}}</a>
        - {{author.born}}-{{author.died}} - {{author.country}} - {{author.city}} - {{author.books|count}} books in
        collection
    </li>
    {% endfor %}
    {% endif %}
</ul>
{% elif flag == 'books_by_letter' %}
<ul>
    {% if books_by_letter|count == 0 %}
    <p>There is no book starting with this letter</p>
    {% else %}
    {% for book in books_by_letter %}
    <li>
        <button class="btn btn-outline-secondary btn-sm">
            <a href="{{ url_for('book.edit_title', id=book.id) }}"
                style="text-decoration: none; color: darkgray">Edit</a>
        </button>
        <button class="btn btn-outline-danger btn-sm">
            <a href="{{ url_for('book.book_details', id=book.id, book=book) }}"
                style="text-decoration: none; color: orangered">Delete</a>
        </button>&ensp;‚ñ´Ô∏è
        <a style="text-decoration:none" href="{{ url_for('book.book_details', id=book.id) }}">{{ book.title
                                    }}</a>
        - {{book.first_publish}} -

        <a style="text-decoration:none"
            href="{{ url_for('author.bibliography', author=book.author) }}">{{ book.author }}</a>
        {% for author in book.authors %}
        {% if author.fullname != book.author %}
        <a style="text-decoration:none" href="{{ url_for('author.bibliography', author=author.fullname) }}">
            {{ '|' if loop.first else ''}} {{ author.fullname }} {{ '|' if not loop.last else ''}}</a>
        {% endif %}
        {% endfor %}
    </li>
    {% endfor %}
    {% endif %}
</ul>
{% endif %}
{% endblock %}